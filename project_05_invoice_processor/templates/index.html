<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InvoiceIQ - AI Invoice Processor</title>
    <meta name="description"
        content="Automated invoice processing for hardware distributors with AI-powered extraction">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" href="/static/css/style.css">
</head>

<body>
    <!-- Background Animation -->
    <div class="bg-animation">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">üìä</div>
                    <h1>InvoiceIQ</h1>
                </div>
                <nav class="nav">
                    <button class="nav-btn active" data-view="upload">
                        <span class="icon">üì§</span>
                        Upload
                    </button>
                    <button class="nav-btn" data-view="invoices">
                        <span class="icon">üìã</span>
                        Invoices
                    </button>
                    <button class="nav-btn" data-view="inventory">
                        <span class="icon">üì¶</span>
                        Inventory
                    </button>
                    <button class="nav-btn" data-view="analytics">
                        <span class="icon">üìä</span>
                        Analytics
                    </button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <div class="container">

            <!-- Stats Cards -->
            <div class="stats-grid" id="stats">
                <div class="stat-card">
                    <div class="stat-icon">üìÑ</div>
                    <div class="stat-info">
                        <p class="stat-label">Total Invoices</p>
                        <h3 class="stat-value" id="stat-invoices">0</h3>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">üì¶</div>
                    <div class="stat-info">
                        <p class="stat-label">Items in Catalog</p>
                        <h3 class="stat-value" id="stat-items">0</h3>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">üè¢</div>
                    <div class="stat-info">
                        <p class="stat-label">Suppliers</p>
                        <h3 class="stat-value" id="stat-suppliers">0</h3>
                    </div>
                </div>

                <div class="stat-card alert">
                    <div class="stat-icon">‚ö†Ô∏è</div>
                    <div class="stat-info">
                        <p class="stat-label">Low Stock Alerts</p>
                        <h3 class="stat-value" id="stat-alerts">0</h3>
                    </div>
                </div>
            </div>

            <!-- Views -->

            <!-- Upload View -->
            <div class="view active" id="view-upload">
                <div class="upload-section">
                    <h2 class="section-title">Upload Invoice</h2>

                    <!-- Invoice Type Selection -->
                    <div class="invoice-type-selector" id="invoiceTypeSelector">
                        <h3 style="text-align: center; margin-bottom: 1.5rem; color: var(--text-primary);">
                            What type of invoice?
                        </h3>
                        <div class="type-buttons">
                            <button class="type-btn active" data-type="purchase">
                                <div class="type-icon">üì•</div>
                                <h4>Purchase Invoice</h4>
                                <p>Stock IN - You are buying from supplier</p>
                            </button>
                            <button class="type-btn" data-type="sales">
                                <div class="type-icon">üì§</div>
                                <h4>Sales Invoice</h4>
                                <p>Stock OUT - You are selling to customer</p>
                            </button>
                        </div>
                    </div>

                    <!-- Upload Zone -->
                    <div class="upload-zone" id="uploadZone">
                        <div class="upload-icon">üìÑ</div>
                        <h3>Drag & Drop Invoice Here</h3>
                        <p>or click to browse</p>
                        <p class="upload-formats">Supports: PDF, JPG, PNG</p>
                        <p class="upload-type-label"><strong id="selectedTypeLabel">Purchase Invoice</strong> selected
                        </p>
                        <input type="file" id="fileInput" accept=".pdf,.jpg,.jpeg,.png" hidden>
                    </div>

                    <!-- Processing Status -->
                    <div class="processing-status hidden" id="processingStatus">
                        <div class="spinner"></div>
                        <p class="processing-text">AI is extracting invoice data...</p>
                        <p class="processing-subtext">This usually takes 3-5 seconds</p>
                    </div>

                    <!-- Extracted Data Review -->
                    <div class="review-section hidden" id="reviewSection">
                        <h2 class="section-title">Review Extracted Data</h2>

                        <!-- Supplier/Customer Info -->
                        <div class="review-card">
                            <h3 class="review-card-title" id="partnerCardTitle">Supplier Information</h3>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label id="partnerNameLabel">Supplier Name</label>
                                    <input type="text" id="partner-name" class="form-input">
                                </div>
                                <div class="form-group">
                                    <label>GSTIN</label>
                                    <input type="text" id="partner-gstin" class="form-input">
                                </div>
                                <div class="form-group">
                                    <label>Contact</label>
                                    <input type="text" id="partner-contact" class="form-input">
                                </div>
                                <div class="form-group">
                                    <label>Email</label>
                                    <input type="email" id="partner-email" class="form-input">
                                </div>
                                <div class="form-group full-width">
                                    <label>Address</label>
                                    <textarea id="partner-address" class="form-input" rows="2"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Invoice Details -->
                        <div class="review-card">
                            <h3 class="review-card-title">Invoice Details</h3>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label>Invoice Number</label>
                                    <input type="text" id="invoice-number" class="form-input" required>
                                </div>
                                <div class="form-group">
                                    <label>Invoice Date</label>
                                    <input type="date" id="invoice-date" class="form-input" required>
                                </div>
                                <div class="form-group">
                                    <label>Due Date</label>
                                    <input type="date" id="invoice-due-date" class="form-input">
                                </div>
                                <div class="form-group">
                                    <label>Payment Terms (Days)</label>
                                    <input type="number" id="payment-terms" class="form-input" value="30">
                                </div>
                            </div>
                        </div>

                        <!-- Items Table -->
                        <div class="review-card">
                            <h3 class="review-card-title">Invoice Items</h3>
                            <div class="table-container">
                                <table class="items-table">
                                    <thead>
                                        <tr>
                                            <th>Item Name</th>
                                            <th>HSN Code</th>
                                            <th>Qty</th>
                                            <th>Unit</th>
                                            <th class="cost-col hidden">Cost</th>
                                            <th>Unit Price</th>
                                            <th>GST %</th>
                                            <th>Total</th>
                                            <th class="profit-col hidden">Profit</th>
                                            <th>Match</th>
                                        </tr>
                                    </thead>
                                    <tbody id="itemsTableBody">
                                        <!-- Populated by JS -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Totals -->
                        <div class="review-card">
                            <h3 class="review-card-title">Invoice Totals</h3>
                            <div class="totals-grid">
                                <div class="total-row">
                                    <span>Subtotal:</span>
                                    <span id="total-subtotal">‚Çπ0.00</span>
                                </div>
                                <div class="total-row">
                                    <span>Total GST:</span>
                                    <span id="total-gst">‚Çπ0.00</span>
                                </div>
                                <div class="total-row profit-row hidden">
                                    <span>Total Profit:</span>
                                    <span id="total-profit" style="color: var(--success);">‚Çπ0.00</span>
                                </div>
                                <div class="total-row grand-total">
                                    <span>Grand Total:</span>
                                    <span id="total-amount">‚Çπ0.00</span>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="action-buttons">
                            <button class="btn btn-secondary" id="btnCancel">Cancel</button>
                            <button class="btn btn-primary" id="btnSave">
                                <span class="btn-icon">üíæ</span>
                                Save to Database
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Invoices View -->
            <div class="view" id="view-invoices">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2 class="section-title" style="margin: 0;">Invoices</h2>
                    <div class="invoice-filter-buttons">
                        <button class="filter-btn active" data-filter="purchase">üì• Purchases</button>
                        <button class="filter-btn" data-filter="sales">üì§ Sales</button>
                    </div>
                </div>
                <div class="invoices-list" id="invoicesList">
                    <!-- Populated by JS -->
                </div>
            </div>

            <!-- Inventory View -->
            <div class="view" id="view-inventory">
                <h2 class="section-title">Inventory</h2>
                <div class="inventory-list" id="inventoryList">
                    <!-- Populated by JS -->
                </div>
            </div>

            <!-- Analytics View -->
            <div class="view" id="view-analytics">
                <h2 class="section-title">Business Analytics</h2>

                <!-- Enhanced Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-info">
                            <p class="stat-label">Total Sales</p>
                            <h3 class="stat-value" id="analytics-total-sales">‚Çπ0</h3>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-info">
                            <p class="stat-label">Total Profit</p>
                            <h3 class="stat-value" id="analytics-total-profit" style="color: var(--success);">‚Çπ0</h3>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">üìà</div>
                        <div class="stat-info">
                            <p class="stat-label">Profit Margin</p>
                            <h3 class="stat-value" id="analytics-margin">0%</h3>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">üíµ</div>
                        <div class="stat-info">
                            <p class="stat-label">Stock Value</p>
                            <h3 class="stat-value" id="analytics-stock-value">‚Çπ0</h3>
                        </div>
                    </div>
                </div>

                <!-- Cash Flow -->
                <div class="review-card" style="margin-top: 2rem;">
                    <h3 class="review-card-title">üí∏ Cash Flow</h3>
                    <div class="stats-grid">
                        <div class="stat-box">
                            <p class="stat-label">Receivables (Pending)</p>
                            <h4 id="analytics-receivables" style="color: var(--success);">‚Çπ0</h4>
                        </div>
                        <div class="stat-box">
                            <p class="stat-label">Payables (Pending)</p>
                            <h4 id="analytics-payables" style="color: var(--error);">‚Çπ0</h4>
                        </div>
                        <div class="stat-box">
                            <p class="stat-label">Net Cash Position</p>
                            <h4 id="analytics-net-cash">‚Çπ0</h4>
                        </div>
                    </div>
                </div>

                <!-- Top Items -->
                <div class="review-card" style="margin-top: 2rem;">
                    <h3 class="review-card-title">üèÜ Top Selling Items</h3>
                    <div class="table-container">
                        <table class="items-table">
                            <thead>
                                <tr>
                                    <th>Item Name</th>
                                    <th>Qty Sold</th>
                                    <th>Profit</th>
                                </tr>
                            </thead>
                            <tbody id="analytics-top-items">
                                <tr>
                                    <td colspan="3" style="text-align: center; color: var(--text-muted);">Loading...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Top Suppliers & Customers -->
                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-top: 2rem;">
                    <!-- Top Suppliers -->
                    <div class="review-card">
                        <h3 class="review-card-title">üè¢ Top Suppliers</h3>
                        <div id="analytics-top-suppliers">
                            <p style="text-align: center; color: var(--text-muted);">Loading...</p>
                        </div>
                    </div>

                    <!-- Top Customers -->
                    <div class="review-card">
                        <h3 class="review-card-title">üë• Top Customers</h3>
                        <div id="analytics-top-customers">
                            <p style="text-align: center; color: var(--text-muted);">Loading...</p>
                        </div>
                    </div>
                </div>

                <!-- Low Stock Alerts -->
                <div class="review-card" style="margin-top: 2rem;">
                    <h3 class="review-card-title">‚ö†Ô∏è Low Stock Alerts</h3>
                    <div class="table-container">
                        <table class="items-table">
                            <thead>
                                <tr>
                                    <th>Item Name</th>
                                    <th>Current</th>
                                    <th>Min Level</th>
                                    <th>Shortage</th>
                                    <th>Reorder Value</th>
                                </tr>
                            </thead>
                            <tbody id="analytics-low-stock">
                                <tr>
                                    <td colspan="5" style="text-align: center; color: var(--text-muted);">Loading...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- JavaScript -->
    <script src="/static/js/app.js"></script>
</body>

</html>